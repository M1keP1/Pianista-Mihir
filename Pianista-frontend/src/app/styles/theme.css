/* Defaults to classic to prevent first-paint flash */
:root {
  --color-bg: #1f1f1f;
  --color-text: #e5e5e5;
  --color-text-secondary: #a0a0a0;
  --color-surface: rgba(255, 255, 255, 0.05);
  --color-accent: #ff0000;
  --color-border-muted: color-mix(in srgb, #ff5f2e 40%, transparent);
  --color-shadow: rgba(0,0,0,0.35); 
  --font-sans: "Open Sans", ui-sans-serif, system-ui, -apple-system, "Segoe UI",
               Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji",
               "Segoe UI Emoji", "Segoe UI Symbol";
}
/* Use Open Sans globally */
html, body {
  font-family: var(--font-sans);
}

/* Classic (Dark) — calm indigo accent */
:root[data-theme="classic"] {
  --color-bg: #0b0f14;                 /* deep blue-black */
  --color-text: #e6eaf2;               /* high-contrast, soft white */
  --color-text-secondary: #9aa4b2;     /* desaturated slate */
  --color-surface: rgba(255, 255, 255, 0.06); /* chat bubbles / cards */
  --color-accent: #4f46e5;             /* indigo-600 */
  --color-border-muted: color-mix(in srgb, var(--color-accent) 28%, transparent);
  --color-shadow: rgba(0, 0, 0, 0.5);
  --color-star: #e6eaf2;               /* if you still use stars */
  --color-surface-bridge: color-mix(in srgb, var(--color-bg) 85%, white 15%);
    --tooltip-bg: rgba(20,20,20,.95);
  --tooltip-fg: #fff;
  --tooltip-border: rgba(255,255,255,.15);
  --tooltip-shadow: rgba(0,0,0,.5);

}

/* Light — airy with same accent for brand consistency */
:root[data-theme="light"] {
  --color-bg: #eeece2;                 /* off-white with a hint of blue */
  --color-text: #0b0f14;               /* near-black for crisp copy */
  --color-text-secondary: #5b6472;     /* cool gray for meta text */
  --color-surface: rgba(255, 255, 255, 0.92); /* subtle card glass */
  --color-accent: #da7756 ;             /* same indigo accent */
  --color-border-muted: color-mix(in srgb, var(--color-accent) 30%, transparent);
  --color-shadow: rgba(0, 0, 0, 0.08);
  --color-star: #2d3748;
  --color-surface-bridge: color-mix(in srgb, var(--color-bg) 88%, black 12%);
    --tooltip-bg: rgba(255,255,255,.98);
  --tooltip-fg: #0b0f14;
  --tooltip-border: rgba(0,0,0,.18);
  --tooltip-shadow: rgba(0,0,0,.18);

}

/* --- add near the top with other :root tokens --- */
:root {
  /* ...existing vars... */
  --color-surface-bridge: color-mix(in srgb, var(--color-bg) 85%, white 15%);
}

/* ===================== App Shell Layout ===================== */

.app-shell {
  --shell-pane-width: clamp(240px, 24vw, 300px);
  --shell-pane-width-collapsed: 84px;
  --shell-transition: 220ms cubic-bezier(.25,.8,.25,1);
  position: relative;
  display: grid;
  grid-template-columns: minmax(var(--shell-pane-width-collapsed), var(--shell-pane-width)) 1fr;
  min-height: 100vh;
  background: var(--color-bg);
  color: var(--color-text);
  transition: grid-template-columns var(--shell-transition);
}

.app-shell.is-collapsed {
  grid-template-columns: var(--shell-pane-width-collapsed) 1fr;
}

.app-shell__pane {
  position: sticky;
  top: 0;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  gap: 1.25rem;
  height: 100vh;
  padding: 1.25rem 1rem 1.5rem;
  border-right: 1px solid var(--color-border-muted);
  background: color-mix(in srgb, var(--color-bg) 90%, var(--color-surface));
  box-shadow: 4px 0 18px color-mix(in srgb, var(--color-shadow) 30%, transparent);
  overflow: hidden;
  transition: width var(--shell-transition), padding var(--shell-transition);
}

.app-shell.is-collapsed .app-shell__pane {
  padding-inline: 0.75rem;
}

.app-shell__brand-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.5rem;
}

.app-shell__brand-button {
  position: relative !important;
  top: auto !important;
  left: auto !important;
}

.app-shell__collapse {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 36px;
  height: 36px;
  border-radius: 999px;
  border: 1px solid color-mix(in srgb, var(--color-border-muted) 60%, transparent);
  background: color-mix(in srgb, var(--color-surface) 80%, transparent);
  color: var(--color-text);
  cursor: pointer;
  transition: transform 160ms ease, background 160ms ease;
}

.app-shell__collapse:hover {
  background: color-mix(in srgb, var(--color-accent) 22%, transparent);
}

.app-shell__collapse:active {
  transform: scale(.95);
}

.app-shell__nav {
  display: flex;
  flex-direction: column;
  gap: 0.35rem;
}

.app-shell__tab {
  position: relative;
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.65rem 0.85rem;
  border-radius: 12px;
  font-weight: 600;
  text-decoration: none;
  color: var(--color-text-secondary);
  background: transparent;
  border: 1px solid transparent;
  transition: color 150ms ease, background 150ms ease, border-color 150ms ease;
}

.app-shell__tab-icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border-radius: 8px;
  background: color-mix(in srgb, var(--color-surface) 80%, transparent);
  color: var(--color-text-secondary);
  transition: color 150ms ease, background 150ms ease, transform 180ms ease;
}

.app-shell__tab:hover {
  color: var(--color-text);
  border-color: color-mix(in srgb, var(--color-border-muted) 75%, transparent);
  background: color-mix(in srgb, var(--color-surface) 70%, transparent);
}

.app-shell__tab:hover .app-shell__tab-icon {
  background: color-mix(in srgb, var(--color-accent) 20%, transparent);
  color: var(--color-text);
}

.app-shell__tab.is-active {
  color: var(--color-text);
  border-color: color-mix(in srgb, var(--color-accent) 40%, transparent);
  background: color-mix(in srgb, var(--color-accent) 18%, transparent);
  box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--color-accent) 28%, transparent);
}

.app-shell__tab.is-active .app-shell__tab-icon {
  background: color-mix(in srgb, var(--color-accent) 30%, transparent);
  color: #fff;
}

.app-shell__tab-label {
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  transition: opacity 200ms ease, transform 200ms ease;
}

.app-shell.is-collapsed .app-shell__tab-label,
.app-shell.is-collapsed .app-shell__section-title,
.app-shell.is-collapsed .app-shell__past-placeholder {
  opacity: 0;
  transform: translateX(-6px);
  pointer-events: none;
}

.app-shell__section-title {
  font-size: 0.75rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  font-weight: 700;
  color: color-mix(in srgb, var(--color-text-secondary) 85%, transparent);
  transition: opacity 200ms ease;
}

.app-shell__past-chats {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  padding: 0.75rem 0.25rem 0.25rem;
  border-top: 1px dashed color-mix(in srgb, var(--color-border-muted) 65%, transparent);
}

.app-shell__past-placeholder {
  min-height: 72px;
  display: grid;
  place-items: center;
  border-radius: 12px;
  border: 1px dashed color-mix(in srgb, var(--color-border-muted) 45%, transparent);
  background: color-mix(in srgb, var(--color-surface) 60%, transparent);
  color: color-mix(in srgb, var(--color-text-secondary) 85%, transparent);
  font-size: 0.8rem;
  text-align: center;
  padding: 0.75rem;
  transition: opacity 200ms ease;
}

.app-shell__pane-footer {
  margin-top: auto;
  padding-top: 0.75rem;
  border-top: 1px solid color-mix(in srgb, var(--color-border-muted) 50%, transparent);
}

.app-shell__body {
  position: relative;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  background: var(--color-bg);
}

.app-shell__content {
  flex: 1;
  padding: clamp(1.2rem, 4vw, 2rem) clamp(1.5rem, 5vw, 3.5rem);
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: clamp(1.25rem, 3vw, 2.5rem);
}

.app-shell__footer {
  padding: 0 clamp(1.5rem, 5vw, 3.5rem) clamp(1rem, 3vw, 2.5rem);
}

@media (max-width: 900px) {
  .app-shell {
    grid-template-columns: var(--shell-pane-width-collapsed) 1fr;
  }

  .app-shell__pane {
    padding-top: 1rem;
  }
}

@media (max-width: 720px) {
  .app-shell {
    display: flex;
    flex-direction: column;
  }

  .app-shell__pane {
    position: static;
    flex-direction: row;
    align-items: center;
    height: auto;
    border-right: none;
    border-bottom: 1px solid var(--color-border-muted);
    padding: 0.75rem 1rem;
    gap: 1rem;
  }

  .app-shell__nav {
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: center;
  }

  .app-shell__tab {
    flex: 0 1 auto;
  }

  .app-shell__body {
    min-height: 0;
  }

  .app-shell__content {
    padding: 1.25rem;
  }

  .app-shell__pane-footer,
  .app-shell__past-chats {
    display: none;
  }
}

/* --- Outline: default looks hovered; hover/active become more solid --- */
.btn--outline.is-hover-default {
  background: color-mix(in srgb, var(--color-accent) 15%, transparent);
}
.btn--outline.is-hover-default:hover {
  background: color-mix(in srgb, var(--color-accent) 32%, transparent);
  transform: translateZ(0) scale(1.008);
}
.btn--outline.is-hover-default:active {
  background: var(--color-accent);
  color: #fff;
  border-color: color-mix(in srgb, var(--color-accent) 55%, var(--color-border-muted));
  transform: scale(0.97);
}




/* ========== Pill Button Base ========== */

/* Base button: rectangular with rounded edges */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .5rem;
  font-family: monospace;
  text-decoration: none;
  user-select: none;
  cursor: pointer;
  border: 1px solid var(--color-border-muted);
  box-shadow: 0 1.5px 8px 0 var(--color-shadow);
  will-change: transform, background-color, border-color, color, box-shadow;
  transition:
    transform 110ms ease,
    background-color 120ms ease,
    color 120ms ease,
    border-color 120ms ease,
    box-shadow 120ms ease;
}
.btn:focus-visible {
  outline: 2px solid color-mix(in srgb, var(--color-accent) 70%, transparent);
  outline-offset: 2px;
}
.btn.is-disabled, .btn[disabled] { opacity: .65; pointer-events: none; }

/* Sizes */
.btn--sm { padding: .5rem 1rem; font-size: .9rem; }
.btn--md { padding: .65rem 1.4rem; font-size: .95rem; }
.btn--lg { padding: .8rem 1.8rem; font-size: 1rem; }
.is-full { width: 100%; }

/* Variants */
.btn--primary {
  background: var(--color-accent);
  color: #fff;
  border-color: color-mix(in srgb, var(--color-accent) 35%, var(--color-border-muted));
}
.btn--primary:hover {
  background: color-mix(in srgb, var(--color-accent) 90%, white 10%);
  box-shadow: 0 3px 14px 0 color-mix(in srgb, var(--color-accent) 28%, var(--color-shadow));
  transform: translateZ(0) scale(1.012);
}
.btn--primary:active { transform: scale(0.97); }

.btn--primary.is-disabled, 
.btn--primary[disabled] {
  background: color-mix(in srgb, var(--color-accent) 90%, white 10%);
  opacity: 1; /* Override the default .65 opacity */
}
.btn--surface {
  background: var(--color-surface);
  color: var(--color-text);
}
.btn--surface:hover {
  background: color-mix(in srgb, var(--color-surface) 85%, var(--color-accent) 15%);
  transform: translateZ(0) scale(1.008);
}
.btn--surface:active { transform: scale(0.97); }

.btn--outline {
  background: transparent;
  color: var(--color-text);
  border-color: color-mix(in srgb, var(--color-accent) 50%, var(--color-border-muted));
}
.btn--outline:hover {
  background: color-mix(in srgb, var(--color-accent) 15%, transparent);
  transform: translateZ(0) scale(1.008);
}
.btn--outline:active { transform: scale(0.97); }

/* Inner */
.btn__inner { display: inline-flex; align-items: center; gap: .5rem; }
.btn__icon { display: inline-flex; }
.btn__icon--left  { margin-inline-start: -0.1rem; }
.btn__icon--right { margin-inline-end: -0.1rem; }

/* Textarea placeholder + disabled state (theme-aware) */
textarea[data-p-textarea]::placeholder { color: var(--color-text-secondary); opacity: .9; }
textarea[data-p-textarea]:disabled { opacity: .65; cursor: not-allowed; }

/* Textarea placeholder + disabled (already suggested) */
textarea[data-p-textarea]::placeholder { color: var(--color-text-secondary); opacity: .9; }
textarea[data-p-textarea]:disabled { opacity: .65; cursor: not-allowed; }

/* Firefox */
textarea[data-p-textarea],
[data-themed-scroll] {
  scrollbar-width: thin;                  /* slimmer in FF */
  scrollbar-color: color-mix(in srgb, var(--color-accent) 45%, var(--color-border-muted)) transparent;
  scrollbar-gutter: stable both-edges;    /* keeps a gutter so it doesn't hug content edges */
}

/* WebKit (Chrome/Edge/Safari) */
textarea[data-p-textarea]::-webkit-scrollbar,
[data-themed-scroll]::-webkit-scrollbar {
  width: 4px;
}

textarea[data-p-textarea]::-webkit-scrollbar-track,
[data-themed-scroll]::-webkit-scrollbar-track {
  background: color-mix(in srgb, var(--color-bg) 60%, transparent);
  border-radius: 10px;
  background-clip: padding-box;
  border: 3px solid transparent;          /* insets track so it doesn’t touch container sides */
}

textarea[data-p-textarea]::-webkit-scrollbar-thumb,
[data-themed-scroll]::-webkit-scrollbar-thumb {
  background: color-mix(in srgb, var(--color-accent) 55%, var(--color-border-muted));
  border-radius: 10px;
  /* create top/bottom “caps” so the thumb never touches the ends */
  border-top: 6px solid transparent;
  border-bottom: 6px solid transparent;
  /* keep slight side insets too */
  border-left: 2px solid transparent;
  border-right: 2px solid transparent;
  background-clip: padding-box;
}

textarea[data-p-textarea]::-webkit-scrollbar-thumb:hover,
[data-themed-scroll]::-webkit-scrollbar-thumb:hover {
  background: color-mix(in srgb, var(--color-accent) 70%, var(--color-border-muted));
}


/* ===== Textarea Glow States (theme-aware) ===== */
@keyframes pulseGlow {
  0%   { box-shadow: 0 0 6px 1px var(--glow-color, var(--color-accent)); }
  50%  { box-shadow: 0 0 14px 3px var(--glow-color, var(--color-accent)); }
  100% { box-shadow: 0 0 6px 1px var(--glow-color, var(--color-accent)); }
}

textarea[data-p-textarea].glow--verification {
  --glow-color: color-mix(in srgb, var(--color-accent) 80%, #10b981);
  border-color: var(--glow-color);
  animation: pulseGlow 1.4s linear infinite;
}

textarea[data-p-textarea].glow--verified {
  --glow-color: #22c55e; /* green */
  border-color: var(--glow-color);
  box-shadow: 0 0 10px 2px var(--glow-color);
}

textarea[data-p-textarea].glow--error {
  --glow-color: #ef4444; /* red */
  border-color: var(--glow-color);
  box-shadow: 0 0 10px 2px var(--glow-color);
}

textarea[data-p-textarea].glow--ai-thinking {
  --glow-color: #3b82f6; /* blue */
  border-color: var(--glow-color);
  animation: pulseGlow 1.6s ease-in-out infinite;
}
/* ===== Status pill (pure CSS, theme-aware) ===== */
.status-pill {
  position: absolute;
  top: 8px;
  right: 12px;
  width: 26px;
  height: 26px;
  display: grid;
  place-items: center;
  border-radius: 999px;
  border: 1px solid var(--color-border-muted);
  box-shadow: 0 1px 6px var(--color-shadow);
  background: transparent;
  color: var(--color-text);
  z-index: 2; /* keep above textarea paint */
}
.status-pill.is-left { left: 12px; right: auto; }

/* State colors (background + fg color) */
.status-pill[data-state="verification"] { background: rgba(16,185,129,.12); color: var(--color-accent); }
.status-pill[data-state="verified"]     { background: rgba(34,197,94,.12);  color: #22c55e; }
.status-pill[data-state="error"]        { background: rgba(239,68,68,.12);  color: #ef4444; }
.status-pill[data-state="ai-thinking"]  { background: rgba(59,130,246,.12); color: #3b82f6; }

/* Icon sizing (for your external SVGs) */
.status-icon { width: 16px; height: 16px; display: block; }

/* Optional spinner animation (apply .spin class to the icon node) */
@keyframes spin { to { transform: rotate(1turn); } }
.spin { animation: spin 1s linear infinite; }

/* MermaidPanel busy glow (unchanged) */
section[data-busy-glow="true"] {
  animation: mmPanelGlow 1.2s ease-in-out infinite;
  border-color: color-mix(in srgb, var(--color-accent) 45%, var(--color-border-muted));
  box-shadow:
    0 1px 10px color-mix(in srgb, var(--color-shadow) 70%, transparent),
    0 0 0 4px color-mix(in srgb, var(--color-accent) 12%, transparent);
}

/* ===== Inline side-hint INSIDE the textarea =====
   Shows next to the pill; never escapes the container.
   Works on :hover and :focus (so click-to-pin if element is focusable). */
.status-pill[data-hint]::after,
.status-pill[data-hint]::before {
  position: absolute;
  opacity: 0;
  pointer-events: none;
  transition: opacity .12s ease, transform .12s ease;
  z-index: 3; /* above pill */
}

/* Bubble body */
.status-pill[data-hint]::after {
  content: attr(data-hint);
  top: 50%;
  transform: translateY(-50%);
  padding: 4px 10px;
  font-size: 12px;
  line-height: 1.2;
  border-radius: 999px; /* pill-shaped */
  background: color-mix(in srgb, var(--color-bg) 88%, var(--color-surface));
  border: 1px solid var(--color-border-muted);
  box-shadow: 0 1px 6px var(--color-shadow) inset;
  color: var(--color-text);
  white-space: nowrap;         /* keeps pill shape */
  max-width: 65ch;             /* avoid huge pills */
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Arrow (small diamond) */
.status-pill[data-hint]::before {
  content: "";
  top: 50%;
  width: 8px; height: 8px;
  background: color-mix(in srgb, var(--color-bg) 88%, var(--color-surface));
  transform: translateY(-50%) rotate(45deg);
  box-shadow: 0 0 0 1px var(--color-border-muted) inset;
}

/* If the pill is on the LEFT, place bubble to its RIGHT (inside the textarea) */
.status-pill.is-left[data-hint]::after { left: calc(100% + 8px); }
.status-pill.is-left[data-hint]::before { left: calc(100% + 2px); }

/* Default (pill on the RIGHT): place bubble to its LEFT (inside the textarea) */
.status-pill:not(.is-left)[data-hint]::after { right: calc(100% + 8px); }
.status-pill:not(.is-left)[data-hint]::before { right: calc(100% + 2px); }

/* Reveal on hover OR focus (click pins if the pill can receive focus) */
.status-pill[data-hint]:is(:hover, :focus)::after,
.status-pill[data-hint]:is(:hover, :focus)::before {
  opacity: 1;
}

/* Small helper note under editors */
.field-hint {
  margin-top: 6px;
  font-size: 12px;
  line-height: 1.25;
  color: var(--color-text-muted, color-mix(in srgb, var(--color-text) 55%, transparent));
  user-select: none;
}

/* Generic glow utilities (match textarea glows) */
.glow--verification {
  --glow-color: color-mix(in srgb, var(--color-accent) 80%, #10b981);
  border-color: var(--glow-color) !important;
  animation: pulseGlow 1.4s linear infinite;
}
.glow--ai-thinking {
  --glow-color: #3b82f6;
  border-color: var(--glow-color) !important;
  animation: pulseGlow 1.6s ease-in-out infinite;
}
.glow--error {
  --glow-color: #ef4444;
  border-color: var(--glow-color) !important;
  box-shadow: 0 0 10px 2px var(--glow-color);
}
.glow--verified {
  --glow-color: #22c55e;
  border-color: var(--glow-color) !important;
  box-shadow: 0 0 10px 2px var(--glow-color);
}

/* Chip container (same look/height as footer chip) */
.footer-chip {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 4px 16px;                 /* same vertical height */
  border-radius: 8px;
  border: 1px solid color-mix(in srgb, var(--color-accent) 20%, transparent);
  background: color-mix(in srgb, var(--color-bg) 20%, transparent);
  backdrop-filter: blur(6px);
  box-shadow: 0 2px 12px var(--color-shadow);
}

.pianista-footer {
  font-size: 12px;
  font-family: monospace;
  color: var(--color-text-secondary);
  display: flex;
  justify-content: center;
  pointer-events: none;
}

.pianista-footer--floating {
  position: fixed;
  inset: auto 0 0;
  width: 100%;
  padding-bottom: 8px;
  z-index: 10;
}

.pianista-footer--inline {
  position: static;
  width: 100%;
  padding-bottom: 0;
}

.pianista-footer__inner {
  pointer-events: auto;
  display: inline-flex;
  align-items: center;
  gap: 10px;
}

.pianista-footer__tooltip {
  position: absolute;
  right: 0;
  bottom: 140%;
  min-width: 260px;
  max-width: 360px;
  padding: 8px 10px;
  border-radius: 8px;
  background: var(--color-surface);
  color: var(--color-text);
  box-shadow: 0 4px 16px var(--color-shadow);
  font-family: monospace;
  font-size: 11px;
  line-height: 1.35;
  border: 1px solid color-mix(in srgb, var(--color-accent) 28%, transparent);
  opacity: 0;
  visibility: hidden;
  transition: opacity 120ms ease;
  pointer-events: none;
}

.footer-status-chip:hover .pianista-footer__tooltip {
  opacity: 1;
  visibility: visible;
}

.footer-status-chip {
  position: relative;
  display: inline-flex;
  align-items: center;
}
/* Floating actions bar shared across pages */

.action-bar {
  position: fixed;
  right: clamp(16px, 4vw, 48px);
  bottom: calc( env(safe-area-inset-bottom));
  z-index: 11; /* above content; below modals */
  width: min(90vw, 480px);
  padding: 0 16px;
  pointer-events: none; /* so it doesn’t block page clicks... */
  display: flex;
  justify-content: flex-end;
}

.action-bar__lane {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: center;
  gap: clamp(6px, 1.8vw, 14px);
  pointer-events: auto; /* ...but its children do */
  background-color: var(--color-bg);
  border-radius: 16px;
  padding: 12px 16px;
  box-shadow: 0 12px 32px color-mix(in srgb, var(--color-shadow) 70%, transparent);
}

.app-shell .action-bar {
  position: static;
  right: auto;
  bottom: auto;
  width: 100%;
  padding: 0;
  margin-top: clamp(1rem, 3vw, 1.75rem);
  pointer-events: auto;
}

.app-shell .action-bar__lane {
  justify-content: flex-end;
  background-color: color-mix(in srgb, var(--color-surface) 90%, transparent);
  border: 1px solid color-mix(in srgb, var(--color-border-muted) 65%, transparent);
  box-shadow: 0 8px 24px color-mix(in srgb, var(--color-shadow) 45%, transparent);
}

/* Reserve space for the reset icon button so layout doesn't jump */
.reset-slot {
  width: 44px;            /* tweak if your icon PillButton is wider/narrower */
  display: flex;
  align-items: center;
  justify-content: center;
  flex: 0 0 44px;
}
@media (max-width: 560px) {
  .reset-slot { width: 40px; flex-basis: 40px; }
}

.icon-accent {
  color: var(--color-accent);
}

/* Reusable glow driven by --color-accent */
.theme-switcher {
  position: fixed;
  right: 1.5rem;
  bottom: 0.7rem;
  z-index: 100;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 0.5rem;
}

.theme-switcher__trigger {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  width: 36px;
  height: 36px;
  border-radius: 999px;
  border: 1px solid var(--color-border-muted);
  background: var(--color-surface);
  box-shadow: 0 4px 12px var(--color-shadow);
  cursor: pointer;
  transition: transform .15s ease, box-shadow .2s ease, background 160ms ease;
  backdrop-filter: blur(6px);
  outline: none;
}

.theme-switcher__trigger:active {
  transform: scale(.94);
}

.theme-switcher__menu {
  position: absolute;
  inset: auto 0 calc(100% + 0.6rem) auto;
  min-width: 260px;
  background: var(--color-surface);
  color: var(--color-text);
  border: 1px solid color-mix(in srgb, var(--color-accent) 35%, var(--color-border-muted));
  border-radius: 12px;
  box-shadow: 0 14px 42px var(--color-shadow);
  padding: 0.5rem;
  opacity: 0;
  transform: translateY(8px) scale(0.98);
  transform-origin: bottom right;
  transition: opacity 140ms ease, transform 180ms cubic-bezier(.2,.8,.2,1);
  pointer-events: none;
  backdrop-filter: blur(10px);
  text-align: center;
}

.theme-switcher__menu-heading {
  font-family: monospace;
  font-size: .8rem;
  opacity: 0.9;
  padding: .25rem .5rem .35rem;
}

.theme-switcher[data-open="true"] .theme-switcher__menu {
  opacity: 1;
  transform: translateY(0) scale(1);
  pointer-events: auto;
}

.theme-switcher--pane {
  position: relative;
  right: auto;
  bottom: auto;
  width: 100%;
  align-items: stretch;
}

.theme-switcher--pane .theme-switcher__trigger {
  width: 100%;
  height: auto;
  padding: 0.65rem 0.85rem;
  border-radius: 12px;
  justify-content: space-between;
  font-family: monospace;
  font-size: 0.9rem;
}

.theme-switcher--pane .theme-switcher__menu {
  inset: calc(100% + 0.65rem) 0 auto auto;
  transform-origin: top right;
}

.theme-switcher__icon {
  display: block;
  user-select: none;
}

.theme-switcher__trigger-label {
  font-weight: 700;
}

.theme-switcher__chevron {
  font-size: 0.8rem;
}

.theme-switcher__option {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.75rem;
  padding: 0.65rem 0.75rem;
  border-radius: 10px;
  border: 1px solid transparent;
  background: transparent;
  color: inherit;
  cursor: pointer;
  font-family: monospace;
  transition: background .15s ease, border-color .15s ease, transform .05s ease;
  outline: none;
}

.theme-switcher__option:hover {
  background: color-mix(in srgb, var(--color-accent) 18%, transparent);
}

.theme-switcher__option.is-active {
  border-color: color-mix(in srgb, var(--color-accent) 55%, transparent);
  background: color-mix(in srgb, var(--color-accent) 22%, transparent);
}

.theme-switcher__option-text {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 0.15rem;
}

.theme-switcher__option-label {
  font-weight: 800;
  font-size: 1.05rem;
  letter-spacing: 0.02em;
}

.theme-switcher__option-hint {
  font-size: 0.85rem;
  opacity: 0.75;
}

.theme-switcher__option-check {
  font-size: 1rem;
  opacity: 0.9;
}

@keyframes glowPulse {
  0%   { box-shadow: 0 0 0 0   var(--glow-color, color-mix(in srgb, var(--color-accent) 36%, transparent)); }
  50%  { box-shadow: 0 0 0 6px var(--glow-soft,  color-mix(in srgb, var(--color-accent) 18%, transparent)); }
  100% { box-shadow: 0 0 0 0   var(--glow-color, color-mix(in srgb, var(--color-accent) 36%, transparent)); }
}
@media (prefers-reduced-motion: reduce) {
  .glow-pulse { animation: none !important; }
}
.glow-pulse {
  border-radius: 999px;
  animation: glowPulse 1.4s ease-in-out infinite;
}

/* (Optional) tweak per theme if you have light/dark tokens */
.theme-dark .glow-pulse {
  --glow-color: color-mix(in srgb, var(--color-accent) 42%, transparent);
  --glow-soft:  color-mix(in srgb, var(--color-accent) 22%, transparent);
}

/* Utility: force-disable glow/box-shadows inside this container */
.no-glow,
.no-glow * {
  box-shadow: none !important;
}
